<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Fri Apr 05 2024 09:54:35 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="660e33e07b41238753655fdf" data-wf-site="660bd1741c8be87857bc7204">
<head>
  <meta charset="utf-8">
  <title>Step 4</title>
  <meta content="Step 4" property="og:title">
  <meta content="Step 4" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/raft-sign-up.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>
<body class="body-5">
  <section class="section-2 step-4">
    <div class="w-layout-blockcontainer container-2 w-container">
      <div class="div-block-2"><img src="images/RAFT-LogoLogo.svg" loading="lazy" alt="" class="image">
        <h5 id="w-node-c180f8ad-adf9-4d0a-a0ab-d96e818ef500-53655fdf" class="heading-3">Email: <span class="text-span">currentuser@email.com</span></h5>
        <a href="index.html" class="w-inline-block"><img src="images/VectorLogout.svg" loading="lazy" alt="" class="image-2"></a>
      </div>
      <div class="div-block-3">
        <a href="step-1.html" class="link-block w-inline-block"><img src="images/Group-74P2-S1.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-2.html" class="link-block w-inline-block"><img src="images/Group-76P3-S2.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-3.html" class="link-block w-inline-block"><img src="images/Group-78P4-S3.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-4.html" aria-current="page" class="link-block w-inline-block w--current"><img src="images/Group-79P4-S4.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-5.html" class="link-block w-inline-block"><img src="images/Group-73Step-5-1.svg" loading="lazy" alt="" class="image-6"></a>
      </div>
      <div class="div-block">
        <div class="div-block-4">
          <h6 class="heading-4">Tell us about yourself.</h6>
        </div>
        <div class="w-form">
          <form id="wf-form-River-Selection" name="wf-form-River-Selection" data-name="River Selection" method="post" class="form-2 step-4" data-wf-page-id="660e33e07b41238753655fdf" data-wf-element-id="c180f8ad-adf9-4d0a-a0ab-d96e818ef516">
            <div class="div-block-10">
              <div class="div-block-9">
                <h5 class="heading-6">Ethnicity</h5><select id="Ethnicity" name="Ethnicity" data-name="Ethnicity" class="select-field w-select">
                  <option value="">Select one...</option>
                  <option value="First">First choice</option>
                  <option value="Second">Second choice</option>
                  <option value="Third">Third choice</option>
                </select>
              </div>
              <div class="div-block-9">
                <h5 class="heading-6">Gender</h5><select id="Gender" name="Gender" data-name="Gender" class="select-field w-select">
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                  <option value="Non-Binary">Non-Binary</option>
                </select>
              </div>
              <div class="div-block-9">
                <h5 class="heading-6">Age</h5><select id="Age" name="Age" data-name="Age" class="select-field w-select">
                 
                </select>
              </div>
              <div id="w-node-dc41e523-7a58-426c-f65f-0a7083910904-53655fdf" class="div-block-9">
                <h5 class="heading-6">Education</h5><select id="Education" name="Education" data-name="Education" class="select-field w-select">
                  <option value="High School">High School</option>
                  <option value="21-25">21-25</option>
                  <option value="26-20">26-30</option>
                </select>
              </div>
              <div id="w-node-_0a7752fe-7dd2-c90d-1cc0-63f7e8886f77-53655fdf" class="div-block-9">
                <h5 class="heading-6">Location</h5><select id="Location" name="Location" data-name="Location" class="select-field w-select">
                  <option value="Urban">Urban</option>
                  <option value="21-25">21-25</option>
                  <option value="26-20">26-30</option>
                </select>
              </div>
            </div>
            <div class="div-block-7">
              <a href="step-3.html" class="button submit-button left w-inline-block"><img src="images/Слой_1Back_arrow.svg" loading="lazy" alt="" class="image-7">
                <div id="w-node-c180f8ad-adf9-4d0a-a0ab-d96e818ef710-53655fdf" class="text-block-7">Back</div>
              </a>
              <!-- <a id="w-node-c180f8ad-adf9-4d0a-a0ab-d96e818ef712-53655fdf" href="step-5.html" class="button submit-button left w-inline-block">
                <div id="w-node-c180f8ad-adf9-4d0a-a0ab-d96e818ef713-53655fdf" class="text-block-7">Next</div><img src="images/Слой_1Right_icon.svg" loading="lazy" alt="" class="image-7">
              </a> -->
              <button type="submit" id="w-node-c180f8ad-adf9-4d0a-a0ab-d96e818ef712-53655fdf"  class="button submit-button left w-inline-block">
                <div id="w-node-c180f8ad-adf9-4d0a-a0ab-d96e818ef713-53655fdf" class="text-block-7">Next</div><img src="images/Слой_1Right_icon.svg" loading="lazy" alt="" class="image-7">
              </button>
            </div>
          </form>
          <div class="w-form-done">
            <div>Thank you! Your submission has been received!</div>
          </div>
          <div class="w-form-fail">
            <div>Oops! Something went wrong while submitting the form.</div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=660bd1741c8be87857bc7204" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
   <script>


    $(document).ready(function() {
    	var urlParams = new URLSearchParams(window.location.search);
    	console.log(urlParams)
        var token = urlParams.get('token');
    	const currentPath = window.location.pathname;
    	console.log(currentPath);
    	 var formData = {
                 "token" : token
             };
    	 $.ajax({
             type: "POST",
            // url: "http://localhost:8080/stepList",
            url: "https://raftapp.azurewebsites.net/stepList",
             data: JSON.stringify(formData),
             contentType: "application/json",
             success: function(response) {
                
                 console.log("Success:", response);
                 $('.div-block-3').html('');
                
                     let lists = '';
for (const step in response) {
    if (response.hasOwnProperty(step)) {
    	const isActive = response[step];
        const stepNumber = step.replace('step', ''); // Extracting the step number
        var img;
        if (stepNumber=='1'){
        	img=`images/Group-74P2-S1.svg`;
        }
        if (stepNumber=='2'){
        	img=`images/Group-76P3-S2.svg`;
        }
        
       if (stepNumber=='3'){
    	   img=`images/Group-78P4-S3.svg`;
        }
       
       if (stepNumber=='4'){
    	   img=`images/Group-79P4-S4.svg`;
       }
       if (stepNumber=='5'){
    	   img=`images/Group-73Step-5-1.svg`;
       }
        const href = isActive ? `step-${stepNumber}.html` : '#';
        const activeClass = (currentPath===`/step-${stepNumber}.html`) ? 'w--current' : '';
        
        const ariaCurrent = (currentPath===`/step-${stepNumber}.html`) ? `aria-current="page"`:``;
        lists += `<a href="${href}?token=${token}" ${ariaCurrent} class="link-block w-inline-block ${activeClass}"><img src="${img}" loading="lazy" alt="" class="image-6"></a>`;
    }
}
$('.div-block-3').html( lists);

                 $('.success-message').show();
                 $('.error-message').hide();
             },
             error: function(xhr, status, error) {
                 // Handle errors
                 console.error("Error:", error);
                 $('.success-message').hide();
                 $('.error-message').show();
             }
         });
        $('#wf-form-River-Selection').submit(function(e) {
            e.preventDefault();
         // Extract token from URL
            var urlParams = new URLSearchParams(window.location.search);
            var token = urlParams.get('token');
         // Get the value of the selected radio button
            var Ethnicity = $('#Ethnicity').val();
         console.log(Ethnicity);
            var Gender = $('#Gender').val();
            var Age = $('#Age').val();
            var Education = $('#Education').val();
            var Location = $('#Location').val();
            console.log(token);
            
         // Check if Ethnicity radio button is selected
            if (!Ethnicity) {
                alert('Please select an option for Ethnicity.');
                return;
            }

            // Check if Gender radio button is selected
            if (!Gender) {
                alert('Please select an option for Gender.');
                return;
            }

            // Check if Age radio button is selected
            if (!Age) {
                alert('Please select an option for Age.');
                return;
            }

            // Check if Education radio button is selected
            if (!Education) {
                alert('Please select an option for Education.');
                return;
            }

            // Check if Location radio button is selected
            if (!Location) {
                alert('Please select an option for Location.');
                return;
            }

            var formData = {
            	    
            	        "ethnic_id": Ethnicity,
            	        "gender_id": Gender,
            	        "age_id": Age,
            	        "education_id": Education,
            	        "location_id": Location,
            	         "token": token
            	};
    
            $.ajax({
                type: "POST",
               url: "https://raftapp.azurewebsites.net/api/step4",
                //url: "http://localhost:8080/api/step4",
                data: JSON.stringify(formData),
                contentType: "application/json",
                success: function(response) {
                	console.log(response);
                    // Handle success
                     if(response.status==='ok'){
                    	if(response.token===token){
                    		//var redirectUrl = "http://localhost:8080/step-5.html?token=" + response.token;
							var redirectUrl = "https://raftapp.azurewebsites.net/step-5.html?token=" + response.token;
                    		// Redirect to the new URL
                    		window.location.href = redirectUrl;
                    	}
                    } 
                    console.log("Success:", response);
                    $('.success-message').show();
                    $('.error-message').hide();
                },
                error: function(xhr, status, error) {
                    // Handle errors
                    console.error("Error:", error);
                    $('.success-message').hide();
                    $('.error-message').show();
                }
            });
        });
       
        
        
        
        $.ajax({
            type: "GET",
            url: "https://raftapp.azurewebsites.net/agelist",
           // url: "http://localhost:8080/agelist",
            contentType: "application/json",
            success: function(response) {
            	 // Select the <select> element by its ID
                var selectElement = $('#Age');

                // Clear any existing options
                selectElement.empty();

                 var option = '<option value="">Select One</option>'; // Initialize with default option
                response.forEach(function(item) {
                    // Create a new <option> element
                    var newOption = $('<option></option>').attr('value', item.id).text(item.ageGroup);

                    // Append the new <option> to the existing options
                    option += newOption[0].outerHTML;
                });
             // Finally, append all options to the <select> element
                selectElement.html(option);
                //console.log("Success:", response);
                $('.success-message').show();
                $('.error-message').hide();
            },
            error: function(xhr, status, error) {
                // Handle errors
                console.error("Error:", error);
                $('.success-message').hide();
                $('.error-message').show();
            }
        });
        
        $.ajax({
            type: "GET",
            url: "https://raftapp.azurewebsites.net/genderlist",
            //url: "http://localhost:8080/genderlist",
            contentType: "application/json",
            success: function(response) {
            	 // Select the <select> element by its ID
                var selectElement = $('#Gender');

                // Clear any existing options
                selectElement.empty();

                 var option = '<option value="">Select One</option>'; // Initialize with default option
                response.forEach(function(item) {
                    // Create a new <option> element
                    var newOption = $('<option></option>').attr('value', item.id).text(item.gender);

                    // Append the new <option> to the existing options
                    option += newOption[0].outerHTML;
                });
             // Finally, append all options to the <select> element
                selectElement.html(option);
                //console.log("Success:", response);
                
            },
            error: function(xhr, status, error) {
                // Handle errors
                console.error("Error:", error);
                $('.success-message').hide();
                $('.error-message').show();
            }
        });
        
        $.ajax({
            type: "GET",
            url: "https://raftapp.azurewebsites.net/educationlist",
          //  url: "http://localhost:8080/educationlist",
            contentType: "application/json",
            success: function(response) {
            	 // Select the <select> element by its ID
                var selectElement = $('#Education');

                // Clear any existing options
                selectElement.empty();

                 var option = '<option value="">Select One</option>'; // Initialize with default option
                response.forEach(function(item) {
                    // Create a new <option> element
                    var newOption = $('<option></option>').attr('value', item.id).text(item.educationType);

                    // Append the new <option> to the existing options
                    option += newOption[0].outerHTML;
                });
             // Finally, append all options to the <select> element
                selectElement.html(option);
                
                //console.log("Success:", response);
                $('.success-message').show();
                $('.error-message').hide();
            },
            error: function(xhr, status, error) {
                // Handle errors
                console.error("Error:", error);
                $('.success-message').hide();
                $('.error-message').show();
            }
        });
        
        $.ajax({
            type: "GET",
            url: "https://raftapp.azurewebsites.net/ethniclist",
            //url: "http://localhost:8080/ethniclist",
            contentType: "application/json",
            success: function(response) {
            	// Select the <select> element by its ID
                var selectElement = $('#Ethnicity');

                // Clear any existing options
                selectElement.empty();

                 var option = '<option value="">Select One</option>'; // Initialize with default option
                response.forEach(function(item) {
                    // Create a new <option> element
                    var newOption = $('<option></option>').attr('value', item.id).text(item.ethnicType);

                    // Append the new <option> to the existing options
                    option += newOption[0].outerHTML;
                });
             // Finally, append all options to the <select> element
                selectElement.html(option);
                //console.log("Success:", response);
                $('.success-message').show();
                $('.error-message').hide();
            },
            error: function(xhr, status, error) {
                // Handle errors
                console.error("Error:", error);
                $('.success-message').hide();
                $('.error-message').show();
            }
        });
        
        $.ajax({
            type: "GET",
            url: "https://raftapp.azurewebsites.net/locationlist",
           // url: "http://localhost:8080/locationlist",
            contentType: "application/json",
            success: function(response) {
            	// Select the <select> element by its ID
                var selectElement = $('#Location');

                // Clear any existing options
                selectElement.empty();

                 var option = '<option value="">Select One</option>'; // Initialize with default option
                response.forEach(function(item) {
                    // Create a new <option> element
                    var newOption = $('<option></option>').attr('value', item.id).text(item.location);

                    // Append the new <option> to the existing options
                    option += newOption[0].outerHTML;
                });
             // Finally, append all options to the <select> element
                selectElement.html(option);
               //console.log("Success:", response);
                $('.success-message').show();
                $('.error-message').hide();
            },
            error: function(xhr, status, error) {
                // Handle errors
                console.error("Error:", error);
                $('.success-message').hide();
                $('.error-message').show();
            }
        });
        
    });
    
    
   
       </script>
</body>
</html>