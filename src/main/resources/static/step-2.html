<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Fri Apr 05 2024 09:54:35 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="660e337a13948777df2646c9" data-wf-site="660bd1741c8be87857bc7204">
<head>
  <meta charset="utf-8">
  <title>Step 2</title>
  <meta content="Step 2" property="og:title">
  <meta content="Step 2" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/raft-sign-up.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>
<body class="body-3">
  <section class="section-2 step-2">
    <div class="w-layout-blockcontainer container-2 w-container">
      <div class="div-block-2"><img src="images/RAFT-LogoLogo.svg" loading="lazy" alt="" class="image">
        <h5 id="w-node-_1e822621-9833-f2b8-bcc6-aae3e0686567-df2646c9" class="heading-3">Email: <span class="text-span">currentuser@email.com</span></h5>
        <a href="index.html" class="w-inline-block"><img src="images/VectorLogout.svg" loading="lazy" alt="" class="image-2"></a>
      </div>
      <div class="div-block-3">
      <a href="step-1.html" class="link-block w-inline-block"><img src="images/Group-74P2-S1.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-2.html" aria-current="page" class="link-block w-inline-block w--current"><img src="images/Group-75P2-S2.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-3.html" class="link-block w-inline-block"><img src="images/Group-71Step-3.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-4.html" class="link-block w-inline-block"><img src="images/Group-72Step-4.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-5.html" class="link-block w-inline-block"><img src="images/Group-73Step-5-1.svg" loading="lazy" alt="" class="image-6"></a>
       </div>
      <div class="div-block">
        <div class="div-block-4">
          <h6 class="heading-4">Select which adventures interest you.</h6>
          <div data-hover="false" data-delay="0" class="w-dropdown">
            <div class="dropdown-toggle w-dropdown-toggle">
              <div class="icon w-icon-dropdown-toggle"></div>
              <div class="icon w-icon-dropdown-toggle"></div>
              <div class="text-block-2">Filter By State</div>
            </div>
            <nav class="dropdown-list w-dropdown-list">
              <a href="#" class="drop_down_list w-dropdown-link">Link 2</a>
              <a href="#" class="drop_down_list w-dropdown-link">Link 3</a>
            </nav>
          </div>
          <form action="/search" class="search w-form"><input class="search-input w-input" maxlength="256" name="query" placeholder="Search State, Outfitter, Level" type="search" id="search" required=""><input type="submit" class="search-button w-button" value=""></form>
        </div>
        <div class="w-form">
          <form id="wf-form-River-Selection" name="wf-form-River-Selection" data-name="River Selection" method="post" class="form-2" data-wf-page-id="660e337a13948777df2646c9" data-wf-element-id="94011670-a580-01de-df1b-045254e9c111">
            <div class="div-block-5">
              <div class="w-layout-grid grid table-heading">
                <div id="w-node-dbe117a8-077c-26e4-0336-8b50a2f2d79a-df2646c9"> </div>
                <div class="text-block-4 table-labels">State</div>
                <div class="text-block-4 table-labels">River</div>
                <div class="text-block-4 table-labels">River Section</div>
                <div class="text-block-4 table-labels">Level</div>
                <div class="text-block-4 table-labels">Outfitter</div>
              </div>
              <div id="river">
             
              </div>
            </div>
            <div class="div-block-6">
              <div class="text-block-6">If none apply or you want us to send you DIY options check here:</div><label class="w-checkbox checkbox-field"><input type="checkbox" id="checkbox" name="checkbox" data-name="Checkbox" ms-code-checkbox-input="step2" class="w-checkbox-input checkbox"><span class="checkbox-label w-form-label" for="checkbox">Checkbox</span></label>
            </div><input class="text-field-2 w-input" autofocus="true" maxlength="256" name="DIY-Text" data-name="DIY Text" ms-code-checkbox-display="step2" placeholder="Enter your DIY option" type="text" id="DIY-Text">
            <div class="div-block-7">
              <a href="step-1.html" class="button submit-button left w-inline-block"><img src="images/Слой_1Back_arrow.svg" loading="lazy" alt="" class="image-7">
                <div id="w-node-_8a5f74dc-f2c9-89e1-7311-8122075ff061-df2646c9" class="text-block-7">Back</div>
              </a>
              <!-- <a id="w-node-f24dd53c-b36d-1386-6f8b-1ad5bb046968-df2646c9" href="step-3.html" class="button submit-button left w-inline-block">
                <div id="w-node-f24dd53c-b36d-1386-6f8b-1ad5bb04696a-df2646c9" class="text-block-7">Next</div><img src="images/Слой_1Right_icon.svg" loading="lazy" alt="" class="image-7">
              </a> -->
              <button type="submit" id="w-node-f24dd53c-b36d-1386-6f8b-1ad5bb046968-df2646c9"  class="button submit-button left w-inline-block">
                <div id="w-node-f24dd53c-b36d-1386-6f8b-1ad5bb04696a-df2646c9" class="text-block-7">Next</div><img src="images/Слой_1Right_icon.svg" loading="lazy" alt="" class="image-7">
              </button>
            </div>
          </form>
          <div class="w-form-done">
            <div>Thank you! Your submission has been received!</div>
          </div>
          <div class="w-form-fail">
            <div>Oops! Something went wrong while submitting the form.</div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=660bd1741c8be87857bc7204" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script>


    $(document).ready(function() {
    	
    	var urlParams = new URLSearchParams(window.location.search);
    	console.log(urlParams)
        var token = urlParams.get('token');
    	const currentPath = window.location.pathname;
    	console.log(currentPath);
    	 var formData = {
                 "token" : token
             };
    	 $.ajax({
             type: "POST",
             //url: "http://localhost:8080/stepList",
             url: "https://raftapp.azurewebsites.net/stepList",
             data: JSON.stringify(formData),
             contentType: "application/json",
             success: function(response) {
                
                 console.log("Success:", response);
                // $('.div-block-3').html('');
                
                     let lists = '';
for (const step in response) {
    if (response.hasOwnProperty(step)) {
    	const isActive = response[step];
        const stepNumber = step.replace('step', ''); // Extracting the step number
        var img;
        if (stepNumber=='1'){
        	img=`images/Group-74P2-S1.svg`;
        }
        if (stepNumber=='2'){
        	img=`images/Group-75P2-S2.svg`;
        }
        
       if (stepNumber=='3'){
    	   img=`images/Group-71Step-3.svg`;
        }
       
       if (stepNumber=='4'){
    	   img=`images/Group-72Step-4.svg`;
       }
       if (stepNumber=='5'){
    	   img=`images/Group-73Step-5-1.svg`;
       }
        const href = isActive ? `step-${stepNumber}.html` : '#';
        const activeClass = (currentPath===`/step-${stepNumber}.html`) ? 'w--current' : '';
        
        const ariaCurrent = (currentPath===`/step-${stepNumber}.html`) ? `aria-current="page"`:``;
        lists += `<a href="${href}?token=${token}" ${ariaCurrent} class="link-block w-inline-block ${activeClass}"><img src="${img}" loading="lazy" alt="" class="image-6"></a>`;
    }
}
//$('.div-block-3').html( lists);

                 $('.success-message').show();
                 $('.error-message').hide();
             },
             error: function(xhr, status, error) {
                 // Handle errors
                 console.error("Error:", error);
                 $('.success-message').hide();
                 $('.error-message').show();
             }
         });
    	
    	
        $('#wf-form-River-Selection').submit(function(e) {
            e.preventDefault();
         // Extract token from URL
            var urlParams = new URLSearchParams(window.location.search);
            var token = urlParams.get('token');
         // Get the value of the selected radio button
            var riverId = $('input[name="Rivers"]:checked').val();
            console.log(token);
            
            // Check if a radio button is selected
            if (!riverId) {
                alert('Please select a river.');
                return;
            }
            var formData = {
                "river_id": riverId,
                "token" : token
            };
    
            $.ajax({
                type: "POST",
                url: "https://raftapp.azurewebsites.net/api/step2",
               // url: "http://localhost:8080/api/step2",
                data: JSON.stringify(formData),
                contentType: "application/json",
                success: function(response) {
                	console.log(response);
                    // Handle success
                     if(response.status==='ok'){
                    	if(response.token===token){
                    		var redirectUrl = "https://raftapp.azurewebsites.net/step-3.html?token=" + response.token;

                    		// Redirect to the new URL
                    		window.location.href = redirectUrl;
                    	}
                    } 
                    console.log("Success:", response);
                    $('.success-message').show();
                    $('.error-message').hide();
                },
                error: function(xhr, status, error) {
                    // Handle errors
                    console.error("Error:", error);
                    $('.success-message').hide();
                    $('.error-message').show();
                }
            });
        });
       
        
        
        
        $.ajax({
            type: "GET",
            url: "https://raftapp.azurewebsites.net/api/step1",
            //url: "http://localhost:8080/riverlist",
            contentType: "application/json",
            success: function(response) {
            	// Variable to store HTML content
            	var riversHTML = '';

            	// Loop through each item in the response array
            	response.forEach(function(item) {
            	    // Construct HTML for each item
            	    var riverItemHTML = `
            	        <div class="w-layout-grid grid list">
            	            <label id="w-node-_0b31a7bd-9e62-07ce-4c01-8be51a421eb3-df2646c9" class="w-radio">
            	                <div class="w-form-formradioinput w-form-formradioinput--inputType-custom w-radio-input"></div>
            	                <input type="radio" name="Rivers" id="River_${item.id}" data-name="Rivers" style="opacity:0;position:absolute;z-index:-1" value="${item.id}">
            	                <span class="radio-button-label w-form-label" for="River_${item.id}"></span>
            	            </label>
            	            <div class="text-block-4 table-content">${item.states}</div>
            	            <div class="text-block-4 table-content">${item.river}</div>
            	            <div class="text-block-4 table-content">${item.river_section}</div>
            	            <div class="text-block-4 table-content">${item.level}</div>
            	            <div class="text-block-4 table-content">${item.outfitter}</div>
            	        </div>`;
            	    
            	    // Append HTML for this item to riversHTML variable
            	    riversHTML += riverItemHTML;
            	});
                //console.log(riversHTML);
            	// Now, riversHTML contains HTML for all items
            	// You can use it to set the content of a container element
            	$('#river').html(riversHTML);
                console.log("Success:", response);
                $('.success-message').show();
                $('.error-message').hide();
            },
            error: function(xhr, status, error) {
                // Handle errors
                console.error("Error:", error);
                $('.success-message').hide();
                $('.error-message').show();
            }
        });
    });
    
    
   
       </script>
</body>
</html>