<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Fri Apr 05 2024 09:54:35 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="660e33fe4c967b93d902efcf" data-wf-site="660bd1741c8be87857bc7204">
<head>
  <meta charset="utf-8">
  <title>Step 5</title>
  <meta content="Step 5" property="og:title">
  <meta content="Step 5" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/raft-sign-up.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>
<body class="body-6">
  <section class="section-2 step-5">
    <div class="w-layout-blockcontainer container-2 w-container">
      <div class="div-block-2"><img src="images/RAFT-LogoLogo.svg" loading="lazy" alt="" class="image">
        <h5 id="w-node-c6cbdfbd-2ae9-5684-82f8-b2d44091cc32-d902efcf" class="heading-3">Email: <span class="text-span user_email"></span></h5>
        <a href="https://raftapp.azurewebsites.net/" class="w-inline-block"><img src="images/VectorLogout.svg" loading="lazy" alt="" class="image-2"></a>
      </div>
      <div class="div-block-3">
        <a href="step-1.html" class="link-block w-inline-block"><img src="images/Group-74P2-S1.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-2.html" class="link-block w-inline-block"><img src="images/Group-76P3-S2.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-3.html" class="link-block w-inline-block"><img src="images/Group-78P4-S3.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-4.html" class="link-block w-inline-block"><img src="images/Group-80P4-S4.svg" loading="lazy" alt="" class="image-6"></a>
        <a href="step-5.html" aria-current="page" class="link-block w-inline-block w--current"><img src="images/Group-81P4-S5.svg" loading="lazy" alt="" class="image-6"></a>
      </div>
      <div class="div-block">
        <div class="div-block-4">
          <h6 class="heading-4 step-5">We can match you up with someone from a different ideological perspective or you can identify someone that you already know.</h6>
        </div>
        <div class="w-form">
          <form id="wf-form-River-Selection" name="wf-form-River-Selection" data-name="River Selection" method="post" class="form-2 step-5" data-wf-page-id="660e33fe4c967b93d902efcf" data-wf-element-id="c6cbdfbd-2ae9-5684-82f8-b2d44091cc48">
            <h5>Select One</h5>
            <div id="w-node-ead57eca-fc1f-b496-1222-94e52a5e68e0-d902efcf" class="div-block-11"><label class="radio-button-field-3 w-radio">
                <div class="w-form-formradioinput w-form-formradioinput--inputType-custom radio-button w-radio-input" id="check_Pair"></div><input type="radio" name="Partner_Pair" id="Pair" data-name="Partner_Pair" required="" style="opacity:0;position:absolute;z-index:-1" value="Pair"><span class="radio-button-label-3 w-form-label" for="Pair">Pair me up with someone from a different ideological perspective.</span>
              </label>
            <!--   <textarea class="textarea-2 w-input" partner="True" maxlength="5000" name="Pair-Prespective" data-name="Pair Prespective" placeholder="Tell us how their ideological perspective is different from yours" id="Pair-Prespective"></textarea>  --> 
              </div>
            <div id="w-node-_79eb3f5e-6b38-a6f6-aeec-07b7238925f3-d902efcf"><label class="radio-button-field-3 w-radio">
                <div class="w-form-formradioinput w-form-formradioinput--inputType-custom radio-button w-radio-input" id="check_Self"></div><input type="radio" name="Partner_Pair" id="Self" data-name="Partner_Pair" required="" style="opacity:0;position:absolute;z-index:-1" value="Self"><span class="radio-button-label-3 w-form-label" for="Self">I have already identified someone to participate in my adventure with me. Their name and email address is below. Understand they will have to submit an application as well.</span>
              </label>
              <div id="Self_div">
                <div class="div-block-12"><input class="text-field-3 w-input" maxlength="256" name="P_F_Name" data-name="P_F_Name" placeholder="First Name" type="text" id="P_F_Name"><input class="text-field-3 w-input" maxlength="256" name="P_L_Name" data-name="P_L_Name" placeholder="Last Name" type="text" id="P_L_Name"></div><input class="text-field-3 w-input" maxlength="256" name="P_Email" data-name="P_Email" placeholder="Email Address" type="email" id="P_Email">
              </div>
            </div>
            <div class="div-block-7">
              <a href="#" onclick="back_button('step-4.html')" class="button submit-button left w-inline-block"><img src="images/Слой_1Back_arrow.svg" loading="lazy" alt="" class="image-7">
                <div id="w-node-c6cbdfbd-2ae9-5684-82f8-b2d44091cc61-d902efcf" class="text-block-7">Back</div>
              </a>
              <!-- <a id="w-node-c6cbdfbd-2ae9-5684-82f8-b2d44091cc63-d902efcf" href="preview-page.html" class="button submit-button left w-inline-block">
                <div id="w-node-c6cbdfbd-2ae9-5684-82f8-b2d44091cc64-d902efcf" class="text-block-7">Next</div><img src="images/Слой_1Right_icon.svg" loading="lazy" alt="" class="image-7">
              </a> -->
              
              <button type="submit" id="w-node-c6cbdfbd-2ae9-5684-82f8-b2d44091cc63-d902efcf"  class="button submit-button left w-inline-block">
                <div id="w-node-c6cbdfbd-2ae9-5684-82f8-b2d44091cc64-d902efcf" class="text-block-7">Next</div><img src="images/Слой_1Right_icon.svg" loading="lazy" alt="" class="image-7">
              </button>
            </div>
          </form>
          <div class="w-form-done">
            <div>Thank you! Your submission has been received!</div>
          </div>
          <div class="w-form-fail">
            <div>Oops! Something went wrong while submitting the form.</div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=660bd1741c8be87857bc7204" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script>
  
  $(document).ready(function() {
	  
	  var urlParams = new URLSearchParams(window.location.search);
  	console.log(urlParams)
      var token = urlParams.get('token');
  	const currentPath = window.location.pathname;
  	console.log(currentPath);
  	 var formData = {
               "token" : token
           };
  	 $.ajax({
           type: "POST",
         //  url: "http://localhost:8080/stepList",
          url: "https://raftapp.azurewebsites.net/stepList",
           data: JSON.stringify(formData),
           contentType: "application/json",
           success: function(response) {
              
               console.log("Success:", response);
               $('.div-block-3').html('');
              
                   let lists = '';
for (const step in response) {
  if (response.hasOwnProperty(step)) {
  	const isActive = response[step];
      const stepNumber = step.replace('step', ''); // Extracting the step number
      var img;
      if (stepNumber=='1'){
      	img=`images/Group-74P2-S1.svg`;
      }
      if (stepNumber=='2'){
      	img=`images/Group-76P3-S2.svg`;
      }
      
     if (stepNumber=='3'){
  	   img=`images/Group-78P4-S3.svg`;
      }
     
     if (stepNumber=='4'){
  	   img=`images/Group-80P4-S4.svg`;
     }
     if (stepNumber=='5'){
  	   img=`images/Group-81P4-S5.svg`;
     }
      const href = isActive ? `step-${stepNumber}.html` : '#';
      const activeClass = (currentPath===`/step-${stepNumber}.html`) ? 'w--current' : '';
      
      const ariaCurrent = (currentPath===`/step-${stepNumber}.html`) ? `aria-current="page"`:``;
      lists += `<a href="${href}?token=${token}" ${ariaCurrent} class="link-block w-inline-block ${activeClass}"><img src="${img}" loading="lazy" alt="" class="image-6"></a>`;
  }
}
$('.div-block-3').html( lists);

               $('.success-message').show();
               $('.error-message').hide();
           },
           error: function(xhr, status, error) {
               // Handle errors
               console.error("Error:", error);
               $('.success-message').hide();
               $('.error-message').show();
           }
       });
	  
      $('#wf-form-River-Selection').submit(function(e) {
          e.preventDefault();
       // Extract token from URL
          var urlParams = new URLSearchParams(window.location.search);
          var token = urlParams.get('token');
       // Get the value of the selected radio button
          // Accessing the values
        var firstName = $('#P_F_Name').val();
        var lastName = $('#P_L_Name').val();
        var emailAddress = $('#P_Email').val();
        var pairRadioButton = document.getElementById("Pair");
        var selfRadioButton = document.getElementById("Self");
        
     // Check if Ethnicity radio button is selected
        if (!pairRadioButton.checked && !selfRadioButton.checked) {
            alert('Please select an option.');
            return;
        }
     // Check if First Name input is provided
      if (selfRadioButton.checked ){
        if (!firstName) {
            alert('Please enter your first name.');
            return;
        }

        // Check if Last Name input is provided
        if (!lastName) {
            alert('Please enter your last name.');
            return;
        }

        // Check if email address is provided
        if (!emailAddress) {
            alert('Please enter your email address.');
            return;
        }
      }
     
        var outside_my_bubble;
        var firstName;
        var lastName;
        var emailAddress;
        if (pairRadioButton.checked) {
        	outside_my_bubble = pairRadioButton.value;
        	console.log(outside_my_bubble);
        	firstName = null;
            lastName = null;
            emailAddress = null;
        } else if (selfRadioButton.checked) {
        	// Get the value of the checkbox
        	 outside_my_bubble = selfRadioButton.value;
        	 console.log(outside_my_bubble);
        	  firstName = $('#P_F_Name').val();
              lastName = $('#P_L_Name').val();
              emailAddress = $('#P_Email').val();
          
        }
         
          console.log(token);
      


       // Define formData object with token and json_input
          var formData = {
    		  "omb_first_name":  firstName,
              "omb_last_name" :  lastName,
              "omb_emailid": emailAddress,
              "outside_my_bubble": outside_my_bubble,
              "token": token
              
          };
  
          $.ajax({
              type: "POST",
              url: "https://raftapp.azurewebsites.net/api/step5",
            //  url: "http://localhost:8080/api/step5",
              data: JSON.stringify(formData),
              contentType: "application/json",
              success: function(response) {
              	console.log(response);
                  // Handle success
                    if(response.status==='ok'){
                  	if(response.token===token){
                  		//var redirectUrl = "http://localhost:8080/preview-page.html?token=" + response.token;
						var redirectUrl = "https://raftapp.azurewebsites.net/preview-page.html?token=" + response.token;
                  		// Redirect to the new URL
                  		window.location.href = redirectUrl;
                  	}
                  }  
                  console.log("Success:", response);
                  $('.success-message').show();
                  $('.error-message').hide();
              },
              error: function(xhr, status, error) {
                  // Handle errors
                  console.error("Error:", error);
                  $('.success-message').hide();
                  $('.error-message').show();
              }
          });
      });
      fill(token,'stepfive'); 
  });
    document.addEventListener("DOMContentLoaded", function() {
        // Get references to the radio buttons and the elements to show/hide
        var pairRadioButton = document.getElementById("Pair");
        var selfRadioButton = document.getElementById("Self");
       // var pairPerspectiveTextarea = document.getElementById("Pair-Prespective");
        var partnerDetailsSection = document.getElementById("Self_div");

        // Function to handle radio button change event
        function handleRadioButtonChange() {
            // Check if the "Pair" radio button is checked
            if (pairRadioButton.checked) {
                // Show the textarea for pair perspective
                //pairPerspectiveTextarea.style.display = "block";
                // Hide the partner details section
                partnerDetailsSection.style.display = "none";
            } else if (selfRadioButton.checked) {
                // Show the partner details section
                partnerDetailsSection.style.display = "block";
                // Hide the textarea for pair perspective
                //pairPerspectiveTextarea.style.display = "none";
            }
        }

        // Add event listeners to radio buttons
        pairRadioButton.addEventListener("change", handleRadioButtonChange);
        selfRadioButton.addEventListener("change", handleRadioButtonChange);

        // Initially hide the textarea and partner details section
        //pairPerspectiveTextarea.style.display = "none";
        partnerDetailsSection.style.display = "none";
    });
    function back_button(url){
    	var urlParams = new URLSearchParams(window.location.search);
    	console.log(urlParams);
        var token = urlParams.get('token');
    	var redirectUrl = url+"?token=" +token;
		// Redirect to the new URL
		console.log(redirectUrl)
		window.location.href = redirectUrl;
    }
    
    function fill(token,api){
      	 var formData = {
                  
                   "token" : token
               };
       
               $.ajax({
                   type: "POST",
                  // url: "http://localhost:8080/api/"+api, 
                     url: "https://raftapp.azurewebsites.net/api/"+api,
                   data: JSON.stringify(formData),
                   contentType: "application/json",
                   success: function(response) {
                       // Handle success
                   console.log("Success:", response);
                             var pair_self= response.outside_my_bubble;
                            
                             if (pair_self && $(`#${pair_self}`).length > 0) {
                             	 $(`#${pair_self}`).prop('checked', true);
                                 $(`#check_${pair_self}`).addClass('w--redirected-checked');
                                 
                             }
                             
                             if(pair_self='Self'){
                             $('#P_F_Name').val(response.omb_first_name);
                             $('#P_L_Name').val(response.omb_last_name);
                             $('#P_Email').val(response.omb_emailid);
                             $(`#Self_div`).show();

                             }else{
                            	  $('#P_F_Name').val('');
                                  $('#P_L_Name').val('');
                                  $('#P_Email').val(''); 
                             }
                             $('.user_email').html(response.emailid);

                       console.log("Success:", response);
                       $('.success-message').show();
                       $('.error-message').hide();
                   },
                   error: function(xhr, status, error) {
                       // Handle errors
                       console.error("Error:", error);
                       $('.success-message').hide();
                       $('.error-message').show();
                   }
               });
      }
</script>
</body>
</html>
